<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title><%= typeof title !== 'undefined' ? title + ' - CinemaBox' : 'CinemaBox' %></title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" />
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        netflix: { red: '#E50914', dark: '#141414', black: '#000000', gray: '#2F2F2F' }
                    },
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    animation: { 'fade-in': 'fadeIn 0.5s ease-out', 'pulse-slow': 'pulse 3s infinite' }
                }
            }
        }
    </script>
</head>
<body class="bg-netflix-black text-white font-sans antialiased overflow-x-hidden selection:bg-netflix-red selection:text-white">

    <div id="loader-bar" class="fixed top-0 left-0 h-1 bg-netflix-red z-[100] transition-all duration-300 w-0 shadow-[0_0_10px_#E50914]"></div>

    <nav id="main-nav" class="fixed top-0 w-full z-50 transition-all duration-500 bg-gradient-to-b from-black/90 to-transparent">
        <div class="container mx-auto px-4 md:px-12 h-16 md:h-20 flex items-center justify-between">
            <a href="/" class="spa-link flex items-center gap-2 group">
                <span class="text-2xl md:text-3xl font-black text-netflix-red tracking-tighter">CINEMABOX</span>
            </a>

            <div class="hidden md:flex items-center gap-6 text-sm font-medium text-gray-300">
                <a href="/" class="spa-link hover:text-white transition">Home</a>
                <a href="/browse" class="spa-link hover:text-white transition">Series</a>
                <a href="/browse" class="spa-link hover:text-white transition">New & Popular</a>
            </div>

            <div class="flex items-center gap-4">
                <form action="/search" method="GET" class="spa-form relative group">
                    <input type="text" name="q" placeholder="Search..." 
                        class="bg-black/40 border border-gray-600 rounded-sm py-1 px-3 pl-8 text-sm focus:outline-none focus:border-white focus:bg-black/80 w-0 group-hover:w-48 focus:w-48 transition-all duration-300 opacity-0 group-hover:opacity-100 focus:opacity-100">
                    <i class="fas fa-search absolute left-2 top-2 text-white cursor-pointer"></i>
                </form>
                <div class="w-8 h-8 rounded bg-gradient-to-br from-blue-600 to-purple-600 border border-white/20"></div>
            </div>
        </div>
    </nav>

    <main id="app-content" class="min-h-screen transition-opacity duration-300">
        <%- body %>
    </main>

    <div class="md:hidden fixed bottom-0 w-full bg-[#121212]/95 backdrop-blur-xl border-t border-white/10 z-50 pb-[env(safe-area-inset-bottom)]">
        <div class="grid grid-cols-3 h-14">
            <a href="/" class="spa-link flex flex-col items-center justify-center text-gray-400 hover:text-white active:text-netflix-red">
                <i class="fas fa-home mb-1"></i><span class="text-[10px]">Home</span>
            </a>
            <a href="/browse" class="spa-link flex flex-col items-center justify-center text-gray-400 hover:text-white">
                <i class="fas fa-compass mb-1"></i><span class="text-[10px]">Browse</span>
            </a>
            <a href="/search" class="spa-link flex flex-col items-center justify-center text-gray-400 hover:text-white">
                <i class="fas fa-search mb-1"></i><span class="text-[10px]">Search</span>
            </a>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/hls.js/1.4.12/hls.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    
    <script src="/js/spa.js"></script>
    <script src="/js/player.js"></script>
    <script>AOS.init({ once: true, duration: 800 });</script>
</body>
</html>
